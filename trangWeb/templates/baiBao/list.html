{% extends 'base/base.html' %}
{% load static %}

{% block title %}
List all targets
{% endblock title %}

{% block custom_js_css_link %}
<link rel="stylesheet" type="text/css" href="{% static 'plugins/table/datatable/datatables.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'assets/css/forms/theme-checkbox-radio.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/table/datatable/dt-global_style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/table/datatable/custom_dt_custom.css' %}">
<script src="{% static 'plugins/sweetalerts/promise-polyfill.js' %}"></script>
<link href="{% static 'plugins/sweetalerts/sweetalert2.min.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'plugins/sweetalerts/sweetalert.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'assets/css/components/custom-sweetalert.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'assets/css/components/custom-modal.css' %}" rel="stylesheet" type="text/css" />
<!-- <link href="{% static 'assets/dashboard/demo/demo.css' %}" rel="stylesheet" /> -->
{% endblock custom_js_css_link %}

{% block breadcrumb_title %}
List all Target for Recon
{% endblock breadcrumb_title %}

{% block main_content %}
<div class="container-fluid">
    <div class="row layout-spacing">
        <div class="col-sm-4" ></div>
        <div class="col-sm-4" >
            <form onsubmit="updateSearch()">
                <input type="search" class="baibao-search-bar form-control" placeholder="Search...">
            </form>
        </div>
    </div>
    
    <div class="row">
        <div class="col-sm statbox widget box box-shadow" style="background-color: white; margin-left: 20px; margin-right: 10px;">
            <div class="slide-wrapper" style="color:black;">
                <div class="slide">
                    <div style="color:black;">Trình Trung ương nhân sự 3 chức danh lãnh đạo cao nhất của Nhà nước</div>
                    <a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
                </div>
                <div class="slide">
                    <div style="color:black;">TP HCM có 'ATM nhận trả hồ sơ'</div>
                    <a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
                </div>
                <div class="slide">
                    <div style="color:black;">TP HCM có 'ATM nhận trả hồ sơ'</div>
                    <a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
                </div>
                <div class="slide">
                    <div style="color:black;">TP HCM có 'ATM nhận trả hồ sơ'</div>
                    <a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
                </div>
                <div class="slide">
                    <div style="color:black;"></div>
                    <a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank"></a>
                </div>
            </div>
        </div>
        <div class="col-sm widget box box-shadow" style="background-color: white; margin-left: 10px; margin-right: 20px;">
            <div class="slide-wrapper" style="color:black;" id="bai-bao-detail">
                
            </div>
        </div>
    </div>
</div>
{% endblock main_content %}


{% block page_level_script %}
<script src="{% static 'custom/custom.js' %}"></script>
<script src="{% static 'targetApp/js/custom_domain.js' %}"></script>
<script src="{% static 'plugins/table/datatable/datatables.js' %}"></script>
<script src="{% static 'plugins/sweetalerts/sweetalert2.min.js' %}"></script>
<script src="{% static 'plugins/sweetalerts/custom-sweetalert.js' %}"></script>
<script>
// var e;
table = $('#style-2').DataTable({
    headerCallback:function(e, a, t, n, s) {
        e.getElementsByTagName("th")[0].innerHTML='<label class="new-control new-checkbox checkbox-outline-info m-auto">\n<input type="checkbox" class="new-control-input chk-parent" id="head_checkbox">\n<span class="new-control-indicator"></span><span style="visibility:hidden">c</span>\n</label>'
    },
    columnDefs:[ {
        targets:0, width:"30px", className:"", orderable:!1, render:function(e, a, t, n) {
            return'<label class="new-control new-checkbox checkbox-outline-info m-auto">\n<input type="checkbox" name="targets_checkbox['+ e + ']" class="new-control-input child-chk targets_checkbox" value="' + e + '">\n<span class="new-control-indicator"></span><span style="visibility:hidden">c</span>\n</label>'
        }
    }],
    "oLanguage": {
        "oPaginate": { "sPrevious": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>', "sNext": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>' },
        "sInfo": "Showing page _PAGE_ of _PAGES_",
        "sSearch": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',
        "sSearchPlaceholder": "Search...",
        "sLengthMenu": "Results :  _MENU_",
    },
    "lengthMenu": [5, 10, 20, 30, 50, 100],
    "pageLength": 10
});
multiCheck(table);
// Handle form submission event
$('#frm-example').on('submit', function(e){
   var form = this;

   table.$('input[type="checkbox"]').each(function(){
      if(!$.contains(document, this)){
         if(this.checked){
            $(form).append(
               $('<input>')
                  .attr('type', 'hidden')
                  .attr('name', this.name)
                  .val(this.value)
            );
         }
      }
   });
     e.preventDefault();
});


function updateSearch() {
    alert("The form was submitted");
}

function scanMultipleTargets()
{
    // logic can be improved
    // this function will check if atleast one checkbox for multiple targets are
    // checked or not
    item = document.getElementsByClassName("targets_checkbox");
    checkedCount = 0;
    for (var i = 0; i < item.length; i++) {
        if (item[i].checked) {
            checkedCount++;
        }
    }
    if (!checkedCount) {
        swal({
            title: '',
            text: "Oops! No targets has been selected!",
            type: 'error',
            padding: '2em'
        })
    }
    else {
        // atleast one target is selected
        document.getElementById("multiple_targets_form").submit();
    }
}
</script>
{% endblock page_level_script %}
