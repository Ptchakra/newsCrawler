{% extends 'base/base.html' %}
{% load static %}

{% block title %}
List all targets
{% endblock title %}

{% block custom_js_css_link %}
<link rel="stylesheet" type="text/css" href="{% static 'plugins/table/datatable/datatables.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'assets/css/forms/theme-checkbox-radio.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/table/datatable/dt-global_style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/table/datatable/custom_dt_custom.css' %}">
<script src="{% static 'plugins/sweetalerts/promise-polyfill.js' %}"></script>
<link href="{% static 'plugins/sweetalerts/sweetalert2.min.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'plugins/sweetalerts/sweetalert.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'assets/css/components/custom-sweetalert.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'assets/css/components/custom-modal.css' %}" rel="stylesheet" type="text/css" />
<!-- <link href="{% static 'assets/dashboard/demo/demo.css' %}" rel="stylesheet" /> -->
{% endblock custom_js_css_link %}

{% block breadcrumb_title %}
List all Target for Recon
{% endblock breadcrumb_title %}

{% block main_content %}
<div class="container-fluid">
    <div class="row layout-spacing">
        <div class="col-sm-4" ></div>
        <div class="col-sm-4" >
            <form onsubmit="updateSearch()">
                <input type="search" class="baibao-search-bar form-control" placeholder="Search...">
            </form>
        </div>
    </div>
    
    <div class="row">
        <div class="col-sm widget box box-shadow" style="background-color: white; margin-left: 20px; margin-right: 10px; margin-bottom: 30px;">
            <div class="slide-wrapper" style="color:black;">
                {% csrf_token %}
                    {% for item in bai_bao %}
                    <div class="slide">
                        <div style="color:black;">'{{item.tieu_de}}'</div>
                        <a style="color:blue;" href='{{item.link_bai_bao}}' target="_blank">'{{item.link_bai_bao}}'</a>
                    </div>
                    {% endfor %}
                <div class="dataTables_info" id="style-2_info" role="status" aria-live="polite">Showing '{{tu_bai}} to '{{den_bai}}' of '{{so_bai_bao}}' entries</div>
            </div>
        </div>
        <div class="col-sm widget box box-shadow" style="background-color: white; margin-left: 10px; margin-right: 20px; margin-bottom: 30px;">
            <div class="slide-wrapper" style="color:black;" id="bai-bao-detail">
                
            </div>
        </div>
    </div>
</div>
{% endblock main_content %}


{% block page_level_script %}
<script src="{% static 'custom/custom.js' %}"></script>
<script src="{% static 'targetApp/js/custom_domain.js' %}"></script>
<script src="{% static 'plugins/table/datatable/datatables.js' %}"></script>
<script src="{% static 'plugins/sweetalerts/sweetalert2.min.js' %}"></script>
<script src="{% static 'plugins/sweetalerts/custom-sweetalert.js' %}"></script>
<script>
// var e;
table = $('#style-2').DataTable({
    "oLanguage": {
        "oPaginate": { "sPrevious": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>', "sNext": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>' },
        "sInfo": "Showing page _PAGE_ of _PAGES_",
    },
});
multiCheck(table);
// Handle form submission event
$('#frm-example').on('submit', function(e){
   var form = this;

   table.$('input[type="checkbox"]').each(function(){
      if(!$.contains(document, this)){
         if(this.checked){
            $(form).append(
               $('<input>')
                  .attr('type', 'hidden')
                  .attr('name', this.name)
                  .val(this.value)
            );
         }
      }
   });
     e.preventDefault();
});


function updateSearch() {
    alert("The form was submitted");
}

function scanMultipleTargets()
{
    // logic can be improved
    // this function will check if atleast one checkbox for multiple targets are
    // checked or not
    item = document.getElementsByClassName("targets_checkbox");
    checkedCount = 0;
    for (var i = 0; i < item.length; i++) {
        if (item[i].checked) {
            checkedCount++;
        }
    }
    if (!checkedCount) {
        swal({
            title: '',
            text: "Oops! No targets has been selected!",
            type: 'error',
            padding: '2em'
        })
    }
    else {
        // atleast one target is selected
        document.getElementById("multiple_targets_form").submit();
    }
}
</script>
{% endblock page_level_script %}
