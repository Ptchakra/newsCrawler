{% extends 'base/base.html' %}
{% load humanize %}
{% load static %}

{% block title %}
Dashboard
{% endblock title %}

{% block custom_js_css_link %}
<!-- <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
<link href="{% static 'assets/dashboard/css/black-dashboard.css' %}" rel="stylesheet" />
<link href="{% static 'assets/dashboard/demo/demo.css' %}" rel="stylesheet" />
<link href="{% static 'assets/css/dashboard/dash_1.css' %}" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="{% static 'assets/css/elements/alert.css' %}"> -->

{% endblock custom_js_css_link %}

{% block breadcrumb_title %}
Dashboard
{% endblock breadcrumb_title %}

{% block main_content %}
<div class="main-panel">
	<div class="content">
		<div class="row">
			<div class="col-6">
				<div class="card card-chart">
					<div class="card-header ">
						<div class="row">
							<div class="col-12 text-center">
								{% comment %} <h5 class="card-category">Số lượng bài đăng 10 ngày mới nhất</h5> {% endcomment %}
								<h2 class="card-title" style="color: red;font-family:initial;">Số lượng bài đăng 10 ngày mới nhất</h2>
							</div>
						</div>
					</div>
					<div class="card-body">
						<div class="chart-area">
							<canvas id="10day"></canvas>
						</div>
					</div>
		  		</div>
			</div>
			<div class="col-6">
				<div class="card card-chart">
					<div class="card-header">
						<div class="row">
							<div class="col-12 text-center">
								{% comment %} <h5 class="card-category">Số lượng bài đăng 10 ngày mới nhất</h5> {% endcomment %}
								<h2 class="card-title" style="color: red;font-family:initial;">Top 10 trang web nhiều bài nhất</h2>
							</div>
			  			</div>
					</div>
					<div class="card-body">
			  			<div class="chart-area">
							<canvas id="top_1o_web_chart"></canvas>
			  			</div>
					</div>
		  		</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm">
				<div class="card card-chart">
					<div class="card-header ">
						<div class="row">
							<div class="col-12 text-center">
								{% comment %} <h5 class="card-category">Số lượng bài đăng 10 ngày mới nhất</h5> {% endcomment %}
								<h2 class="card-title" style="color: red;font-family:initial;">Tin mới</h2>
							</div>
						</div>
					</div>
					<div class="card-body">
						<div class="chart-area">
							<div id="slideshow">
								<div class="slide-wrapper" style="color:white;">
									<div class="slide">
										<div style="color:white;">Trình Trung ương nhân sự 3 chức danh lãnh đạo cao nhất của Nhà nước</div>
										<a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
									</div>
									<div class="slide">
										<div style="color:white;">TP HCM có 'ATM nhận trả hồ sơ'</div>
										<a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
									</div>
									<div class="slide">
										<div style="color:white;">TP HCM có 'ATM nhận trả hồ sơ'</div>
										<a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
									</div>
									<div class="slide">
										<div style="color:white;">TP HCM có 'ATM nhận trả hồ sơ'</div>
										<a style="color:blue;" href="https://vnexpress.net/bat-nat-tren-via-he-4264400.html" target="_blank">https://vnexpress.net/bat-nat-tren-via-he-4264400.html</a>
									</div>
								</div>
							</div>
						</div>
					</div>
		  		</div>
			</div>
			<div class="col-sm">
				<div class="card card-chart">
					<div class="card-header">
						<div class="row">
							<div class="col-12 text-center">
								{% comment %} <h5 class="card-category">Số lượng bài đăng 10 ngày mới nhất</h5> {% endcomment %}
								<h2 class="card-title" style="color: red;font-family:initial;">Từ khóa nổi bật trong ngày</h2>
							</div>
			  			</div>
					</div>
					<div class="card-body">
						<img alt="word cloud" src="{{tu_khoa}}" style="width:50px;height:50px;"/>
					</div>
		  		</div>
			</div>
		</div>
	</div>
</div>
{% endblock main_content %}

{% block page_level_script %}
<script src="{% static 'plugins/apex/apexchart.min.js' %}"></script>
<script src="{% static 'assets/dashboard/js/core/jquery.min.js' %}"></script>
<script src="{% static 'assets/dashboard/js/core/popper.min.js' %}"></script>
<!-- <script src="{% static 'assets/dashboard/js/core/bootstrap.min.js' %}"></script> -->
<script src="{% static 'assets/dashboard/js/plugins/perfect-scrollbar.jquery.min.js' %}"></script>
<!-- Chart JS -->
<script src="{% static 'assets/dashboard/js/plugins/chartjs.min.js' %}"></script>
<!--  Notifications Plugin    -->
<script src="{% static 'assets/dashboard/js/plugins/bootstrap-notify.js' %}"></script>
<!-- Control Center for Black Dashboard: parallax effects, scripts for the example pages etc -->
<script src="{% static 'assets/dashboard/js/black-dashboard.min.js' %}"></script><!-- Black Dashboard DEMO methods, don't include it in your project! -->
<!-- <script src="{% static 'assets/dashboard/demo/demo.js' %}"></script> -->
<script>
  $(document).ready(function() {
	$().ready(function() {
	  $sidebar = $('.sidebar');
	  $navbar = $('.navbar');
	  $main_panel = $('.main-panel');

	  $full_page = $('.full-page');

	  $sidebar_responsive = $('body > .navbar-collapse');
	  sidebar_mini_active = true;
	  white_color = false;

	  window_width = $(window).width();

	  fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();



	  $('.fixed-plugin a').click(function(event) {
		if ($(this).hasClass('switch-trigger')) {
		  if (event.stopPropagation) {
			event.stopPropagation();
		  } else if (window.event) {
			window.event.cancelBubble = true;
		  }
		}
	  });

	  $('.fixed-plugin .background-color span').click(function() {
		$(this).siblings().removeClass('active');
		$(this).addClass('active');

		var new_color = $(this).data('color');

		if ($sidebar.length != 0) {
		  $sidebar.attr('data', new_color);
		}

		if ($main_panel.length != 0) {
		  $main_panel.attr('data', new_color);
		}

		if ($full_page.length != 0) {
		  $full_page.attr('filter-color', new_color);
		}

		if ($sidebar_responsive.length != 0) {
		  $sidebar_responsive.attr('data', new_color);
		}
	  });

	  $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function() {
		var $btn = $(this);

		if (sidebar_mini_active == true) {
		  $('body').removeClass('sidebar-mini');
		  sidebar_mini_active = false;
		  blackDashboard.showSidebarMessage('Sidebar mini deactivated...');
		} else {
		  $('body').addClass('sidebar-mini');
		  sidebar_mini_active = true;
		  blackDashboard.showSidebarMessage('Sidebar mini activated...');
		}

		// we simulate the window Resize so the charts will get updated in realtime.
		var simulateWindowResize = setInterval(function() {
		  window.dispatchEvent(new Event('resize'));
		}, 180);

		// we stop the simulation of Window Resize after the animations are completed
		setTimeout(function() {
		  clearInterval(simulateWindowResize);
		}, 1000);
	  });

	  $('.switch-change-color input').on("switchChange.bootstrapSwitch", function() {
		var $btn = $(this);

		if (white_color == true) {

		  $('body').addClass('change-background');
		  setTimeout(function() {
			$('body').removeClass('change-background');
			$('body').removeClass('white-content');
		  }, 900);
		  white_color = false;
		} else {

		  $('body').addClass('change-background');
		  setTimeout(function() {
			$('body').removeClass('change-background');
			$('body').addClass('white-content');
		  }, 900);

		  white_color = true;
		}


	  });

	  $('.light-badge').click(function() {
		$('body').addClass('white-content');
	  });

	  $('.dark-badge').click(function() {
		$('body').removeClass('white-content');
	  });
	});
  });
</script>
<script>
  $(document).ready(function() {
	// Javascript method's body can be found in assets/js/demos.js
	type = ['primary', 'info', 'success', 'warning', 'danger'];

	demo = {
		initPickColor: function() {
			$('.pick-class-label').click(function() {
				var new_class = $(this).attr('new-class');
				var old_class = $('#display-buttons').attr('data-class');
				var display_div = $('#display-buttons');
				if (display_div.length) {
					var display_buttons = display_div.find('.btn');
					display_buttons.removeClass(old_class);
					display_buttons.addClass(new_class);
					display_div.attr('data-class', new_class);
				}
			});
		},

		initDocChart: function() {
			chartColor = "#FFFFFF";

			// General configuration for the charts with Line gradientStroke
			gradientChartOptionsConfiguration = {
				maintainAspectRatio: false,
				legend: {
					display: false
				},
				tooltips: {
					bodySpacing: 4,
					mode: "nearest",
					intersect: 0,
					position: "nearest",
					xPadding: 10,
					yPadding: 10,
					caretPadding: 10
				},
				responsive: true,
				scales: {
					yAxes: [{
						display: 0,
						gridLines: 0,
						ticks: {
							display: false
						},
						gridLines: {
							zeroLineColor: "transparent",
							drawTicks: false,
							display: false,
							drawBorder: false
						}
					}],
					xAxes: [{
						display: 0,
						gridLines: 0,
						ticks: {
							display: false
						},
						gridLines: {
							zeroLineColor: "transparent",
							drawTicks: false,
							display: false,
							drawBorder: false
						}
					}]
				},
				layout: {
					padding: {
						left: 0,
						right: 0,
						top: 15,
						bottom: 15
					}
				}
			};

			ctx = document.getElementById('lineChartExample').getContext("2d");

			gradientStroke = ctx.createLinearGradient(500, 0, 100, 0);
			gradientStroke.addColorStop(0, '#80b6f4');
			gradientStroke.addColorStop(1, chartColor);

			gradientFill = ctx.createLinearGradient(0, 170, 0, 50);
			gradientFill.addColorStop(0, "rgba(128, 182, 244, 0)");
			gradientFill.addColorStop(1, "rgba(249, 99, 59, 0.40)");

			myChart = new Chart(ctx, {
				type: 'line',
				responsive: true,
				data: {
					labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
					datasets: [{
						label: "Active Users",
						borderColor: "#f96332",
						pointBorderColor: "#FFF",
						pointBackgroundColor: "#f96332",
						pointBorderWidth: 2,
						pointHoverRadius: 4,
						pointHoverBorderWidth: 1,
						pointRadius: 4,
						fill: true,
						backgroundColor: gradientFill,
						borderWidth: 2,
						data: [542, 480, 430, 550, 530, 453, 380, 434, 568, 610, 700, 630]
					}]
				},
				options: gradientChartOptionsConfiguration
			});
		},

		initDashboardPageCharts: function() {


			horizontalBarChartConfiguration = {
				indexAxis: 'y',
				maintainAspectRatio: false,
				legend: {
					display: false
				},
				tooltips: {
					backgroundColor: '#f5f5f5',
					titleFontColor: '#333',
					bodyFontColor: '#666',
					bodySpacing: 4,
					xPadding: 12,
					mode: "nearest",
					intersect: 0,
					position: "nearest"
				},
				responsive: true,
				scales: {
					yAxes: [{

						gridLines: {
							drawBorder: false,
							color: 'rgba(29,140,248,0.1)',
							zeroLineColor: "transparent",
						},
						ticks: {
							suggestedMin: 50,
							suggestedMax: 120,
							padding: 20,
							fontColor: "#9e9e9e"
						}
					}],

					xAxes: [{

						gridLines: {
							drawBorder: false,
							color: 'rgba(29,140,248,0.1)',
							zeroLineColor: "transparent",
						},
						ticks: {
							padding: 20,
							fontColor: "#9e9e9e"
						}
					}]
				}
			};


			gradientBarChartConfiguration = {
				maintainAspectRatio: false,
				legend: {
					display: false
				},

				tooltips: {
					backgroundColor: '#f5f5f5',
					titleFontColor: '#333',
					bodyFontColor: '#666',
					bodySpacing: 4,
					xPadding: 12,
					mode: "nearest",
					intersect: 0,
					position: "nearest"
				},
				responsive: true,
				scales: {
					yAxes: [{

						gridLines: {
							drawBorder: false,
							color: 'rgba(29,140,248,0.1)',
							zeroLineColor: "transparent",
						},
						ticks: {
							suggestedMin: 30,
							suggestedMax: 120,
							padding: 20,
							fontColor: "#9e9e9e"
						}
					}],

					xAxes: [{

						gridLines: {
							drawBorder: false,
							color: 'rgba(29,140,248,0.1)',
							zeroLineColor: "transparent",
						},
						ticks: {
							padding: 20,
							fontColor: "#9e9e9e"
						}
					}]
				}
			};

			var ctx = document.getElementById("10day").getContext('2d');

			var gradientStroke = ctx.createLinearGradient(0, 230, 0, 50);

			gradientStroke.addColorStop(1, 'rgba(29,140,248,0.2)');
			gradientStroke.addColorStop(0.4, 'rgba(29,140,248,0.0)');
			gradientStroke.addColorStop(0, 'rgba(29,140,248,0)'); //blue colors


			var dayChart = new Chart(ctx, {
				type: 'bar',
				responsive: true,
				legend: {
					display: false
				},
				data: {
					labels: ['{{ten_10_ngay.0}}','{{ten_10_ngay.1}}','{{ten_10_ngay.2}}','{{ten_10_ngay.3}}','{{ten_10_ngay.4}}','{{ten_10_ngay.5}}','{{ten_10_ngay.6}}','{{ten_10_ngay.7}}','{{ten_10_ngay.8}}','{{ten_10_ngay.9}}'],
					datasets: [{
						label: "News",
						fill: true,
						backgroundColor: gradientStroke,
						hoverBackgroundColor: gradientStroke,
						borderColor: '#1f8ef1',
						borderWidth: 2,
						borderDash: [],
						borderDashOffset: 0.0,
						data: ['{{so_bai_10_ngay.0}}','{{so_bai_10_ngay.1}}','{{so_bai_10_ngay.2}}','{{so_bai_10_ngay.3}}','{{so_bai_10_ngay.4}}','{{so_bai_10_ngay.5}}','{{so_bai_10_ngay.6}}','{{so_bai_10_ngay.7}}','{{so_bai_10_ngay.8}}','{{so_bai_10_ngay.9}}'],
					}]
				},
				options: gradientBarChartConfiguration
			});


			var ctx = document.getElementById("top_1o_web_chart").getContext("2d");

			var gradientStroke = ctx.createLinearGradient(0, 230, 0, 50);

			gradientStroke.addColorStop(1, 'rgba(29,140,248,0.2)');
			gradientStroke.addColorStop(0.4, 'rgba(29,140,248,0.0)');
			gradientStroke.addColorStop(0, 'rgba(29,140,248,0)'); //blue colors


			var myChart = new Chart(ctx, {
				type: 'horizontalBar',
				responsive: true,
				legend: {
					display: false
				},
				data: {
					labels: ['{{ten_10_trang_web.0}}','{{ten_10_trang_web.1}}','{{ten_10_trang_web.2}}','{{ten_10_trang_web.3}}','{{ten_10_trang_web.4}}','{{ten_10_trang_web.5}}','{{ten_10_trang_web.6}}','{{ten_10_trang_web.7}}','{{ten_10_trang_web.8}}','{{ten_10_trang_web.9}}'],
					datasets: [{
						label: "News",
						fill: true,
						axis: 'y',
						backgroundColor: gradientStroke,
						hoverBackgroundColor: gradientStroke,
						borderColor: '#1f8ef1',
						borderWidth: 2,
						borderDash: [],
						borderDashOffset: 0.0,
						data: ['{{top_10_trang_web.0}}','{{top_10_trang_web.1}}','{{top_10_trang_web.2}}','{{top_10_trang_web.3}}','{{top_10_trang_web.4}}','{{top_10_trang_web.5}}','{{top_10_trang_web.6}}','{{top_10_trang_web.7}}','{{top_10_trang_web.8}}','{{top_10_trang_web.9}}'],
					}]
				},
				options: horizontalBarChartConfiguration
			});

		},
	};
	demo.initDashboardPageCharts();

  });
</script>
<script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
<script>
  window.TrackJS &&
	TrackJS.install({
	  token: "ee6fab19c5a04ac1a32a645abde4613a",
	  application: "black-dashboard-free"
	});
</script>
{% endblock page_level_script %}
